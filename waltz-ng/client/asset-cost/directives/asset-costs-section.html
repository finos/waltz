<div>
    <waltz-section name="Costs"
                   id="costs-section">
        <waltz-section-actions>
            <button class="btn btn-xs waltz-btn-transparent"
                    ng-click="ctrl.sourceDataOverlay = ! ctrl.sourceDataOverlay">
                <waltz-icon name="map-signs"></waltz-icon>
            </button>
        </waltz-section-actions>

        <waltz-source-data-overlay visible="ctrl.sourceDataOverlay"
                                   ratings="ctrl.sourceDataRatings"
                                   entities="['ASSET_COST']"
                                   on-dismiss="ctrl.dismissSourceDataOverlay">
        </waltz-source-data-overlay>

        <waltz-loading-notification show="ctrl.assetCostBuckets.length == 0"
                                    name="Loading summary....">
        </waltz-loading-notification>

        <div ng-if="ctrl.assetCostBuckets.length > 0">
            <div class="row">
                <div class="col-md-12" class="myChart">
                    <waltz-bucket-chart buckets="ctrl.assetCostBuckets"
                                        on-bucket-select="ctrl.onBucketSelect">
                    </waltz-bucket-chart>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <br>
                    <div class="small text-muted pull-right">
                        Each circle is sized according to the <i>number</i> of applications whose costs
                        fall within the stated range.  Click on a circle for more details.
                    </div>
                </div>
            </div>
        </div>

        <waltz-loading-notification show="ctrl.data.loading"
                                    name="Loading detail....">
        </waltz-loading-notification>

        <div class="row"
             ng-if="ctrl.data.costs.length > 0"
             style="margin-top: 12px">
            <div class="col-md-12">
                <waltz-asset-cost-table options='{
                                            showOrgUnit: false,
                                            showAppName: true,
                                            showAssetCode: false
                                        }'
                                        selected-bucket="ctrl.data.selectedBucket"
                                        csv-name='{{ ctrl.csvName }}'
                                        costs='ctrl.data.costs'>
                </waltz-asset-cost-table>
            </div>
        </div>
    </waltz-section>
</div>
