<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
    <div ng-if="$ctrl.bookmarks.length > 0">
        <table class="table table-condensed" >
            <colgroup>
                <col width="3%">
                <col width="15%">
                <col width="20%">
                <col width="22%">
                <col width="25%">
                <col width="15%">
            </colgroup>
            <thead>
            <tr>
                <th></th>
                <th>Kind</th>
                <th>Title</th>
                <th>URL</th>
                <th>Description</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="bookmark in $ctrl.bookmarks" class="waltz-visibility-parent">
                <td>
                    <span ng-if="bookmark.isPrimary">
                        <waltz-icon name="star"></waltz-icon>
                    </span>
                    <span ng-if="!bookmark.isPrimary">
                        <waltz-icon name="star-o"></waltz-icon>
                    </span>
                </td>
                <td>
                    <waltz-enum-value type="'BookmarkKind'"
                                      key="bookmark.bookmarkKind">
                    </waltz-enum-value>
                </td>

                <td>
                    <span ng-bind="bookmark.title"></span>
                </td>
                <td>
                    <span ng-bind="bookmark.url"></span>
                </td>
                <td>
                    <span ng-bind="bookmark.description"></span>
                </td>
                <td>
                    <span class="waltz-visibility-child-50">
                        <a class="clickable wbep-action-remove"
                           ng-if="! bookmark.isRequired"
                           data-ux="bookmarks-remove"
                           ng-click="$ctrl.remove(bookmark)">
                            Remove
                        </a>
                        <span ng-if="! bookmark.isRequired">
                            |
                        </span>
                        <a class="clickable wbep-action-edit"
                           data-ux="bookmarks-edit"
                           ng-click="$ctrl.edit(bookmark)">
                            Edit
                        </a>
                    </span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <waltz-no-data ng-if="$ctrl.bookmarks.length == 0">
        <message>
            <strong>No bookmarks</strong> have been registered yet
        </message>
    </waltz-no-data>

    <div>
        <div ng-if="!$ctrl.visibility.form">
            <button ng-click="$ctrl.create()"
                    data-ux="bookmarks-add-new"
                    class="btn btn-sm btn-primary">
                Add New
            </button>
            &nbsp;
            <a class="clickable"
               data-ux="bookmarks-done"
               ng-click="$ctrl.onDismiss()">
                Done
            </a>
        </div>
    </div>

    <div ng-if="$ctrl.visibility.form">
        <hr>
        <waltz-bookmark-form bookmark="$ctrl.selectedBookmark"
                             confirm-label="{{ $ctrl.selectedBoookmark.id ? 'Edit' : 'Save'}}"
                             on-cancel="$ctrl.visibility.form = false"
                             on-submit="$ctrl.save(bookmark)">
        </waltz-bookmark-form>
    </div>


</div>
