<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<!-- SVG -->
<div id="waltz-boingy-graph" class="viz">
</div>


<!-- FILTER OVERLAY -->
<div style="position: absolute; top: 42px; left: 32px; opacity: 0.9;"
     ng-if="$ctrl.showFilters">
    <waltz-sub-section name="Filters">
        <content>
            <div style="padding: 8px; background-color: white;">
                <div ng-transclude="filterControl"></div>
            </div>

            <div class="waltz-sub-section-controls">
                <a ng-click="$ctrl.onHideFilters()"
                   class="clickable">
                    Close
                </a>
            </div>
        </content>
    </waltz-sub-section>
</div>


<!-- FOCUS OVERLAY -->
<div style="position: absolute; top: 42px; left: 32px; opacity: 0.9;"
     ng-if="$ctrl.selectedNode">
    <waltz-sub-section name="Selected Node">
        <content>
            <div style="padding: 8px; background-color: white;">
                <waltz-entity-summary-panel entity-ref="$ctrl.selectedNode">
                </waltz-entity-summary-panel>
            </div>

            <div class="waltz-sub-section-controls">
                <span>
                    <a ng-click="$ctrl.showIsolated ? $ctrl.onUndoIsolate() : $ctrl.onIsolate()"
                       class="clickable">
                        <span ng-bind="$ctrl.showIsolated ? 'Show all' : 'Isolate'"></span>
                    </a>
                    |
                    <a ng-click="$ctrl.onDeselectNode()"
                       class="clickable">
                        Close
                    </a>
                </span>
            </div>
        </content>
    </waltz-sub-section>
</div>


<!-- BUTTON OVERLAY -->
<div style="position: absolute; top: 2px; left: 32px"
     class="waltz-visibility-parent">

    <!-- FILTER BTN -->
    <button class="btn btn-default btn-xs "
            ng-click="$ctrl.showFilters ? $ctrl.onHideFilters() : $ctrl.onShowFilters()"
            ng-class="{
                'waltz-visibility-child-30': !$ctrl.filtersEnabled,
                'waltz-visibility-child-50': $ctrl.filtersEnabled
            }">
        Filters
    </button>

    <!-- PAN/ZOOM BTN -->
    <button class="btn btn-default btn-xs waltz-visibility-child-30"
            ng-class="{
                'waltz-visibility-child-30': !$ctrl.zoomEnabled,
                'waltz-visibility-child-50': $ctrl.zoomEnabled,
                'btn-default': !$ctrl.zoomEnabled,
                'btn-success': $ctrl.zoomEnabled
            }"
            uib-popover="Drag background to pan, use wheel to zoom in/out"
            popover-enable="$ctrl.zoomEnabled"
            popover-trigger="mouseenter"
            popover-placement="top"
            popover-append-to-body="true"
            ng-click="$ctrl.zoomEnabled ? $ctrl.disableZoom() : $ctrl.enableZoom()">
        <span ng-bind="$ctrl.zoomEnabled ? 'Disable' : 'Enable'"></span> Pan & Zoom
    </button>

    <!-- RESET BTN -->
    <button class="btn btn-default btn-xs waltz-visibility-child-30"
            uib-popover="Restart the layout process"
            popover-trigger="mouseenter"
            popover-placement="top"
            popover-append-to-body="true"
            ng-click="$ctrl.resetSimulation()">
        Reset
    </button>
</div>